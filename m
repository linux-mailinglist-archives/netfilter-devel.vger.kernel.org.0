Return-Path: <netfilter-devel-owner@vger.kernel.org>
X-Original-To: lists+netfilter-devel@lfdr.de
Delivered-To: lists+netfilter-devel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id DF1B3BCAD4
	for <lists+netfilter-devel@lfdr.de>; Tue, 24 Sep 2019 17:04:58 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727402AbfIXPE5 (ORCPT <rfc822;lists+netfilter-devel@lfdr.de>);
        Tue, 24 Sep 2019 11:04:57 -0400
Received: from mail-io1-f46.google.com ([209.85.166.46]:41016 "EHLO
        mail-io1-f46.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1727040AbfIXPE5 (ORCPT
        <rfc822;netfilter-devel@vger.kernel.org>);
        Tue, 24 Sep 2019 11:04:57 -0400
Received: by mail-io1-f46.google.com with SMTP id r26so5212488ioh.8
        for <netfilter-devel@vger.kernel.org>; Tue, 24 Sep 2019 08:04:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to;
        bh=UkLyFTU4aIgItqWUpiKcJskkxBIsKa5IO2CePZum/FE=;
        b=lsaOimQct1OvKJmR2BQhJdc4whG1CarSwOP+i+k85cXd5qxKKrODlsW+nfKILolk78
         rtC3U3MfceqZiCHCxj7KmTxi3XlV17mRy9w/bwws/7v6oTuXYBbvEKRQvRzCuqhCS9mu
         jviEIpsX45LdBS3CUI6ItL+EfmvZU5rmVmtoNJFD9a/rJLV2TcZHj9fHvbqgyOeETFN/
         PbNJB2Mn3KGt/SXbsD8fwkUbyyZxWlHzz14Vke7aKRFgsFdJ+u9oTgH1Kh++V3YKiLA3
         q+DSjl93u3RTk8uaMYwp89cCvpkE1+iwOI2zNNEDI569LuUWjBy2ZLscKC1kbTUAnvw5
         pC4Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to;
        bh=UkLyFTU4aIgItqWUpiKcJskkxBIsKa5IO2CePZum/FE=;
        b=dns4ALUwCq8DTE9+USB435BPsSXtqoPVRSr+9ikSGAUtqIxh4jYhwn1f41tYN5K36m
         21m05XeagFVjLyvbB/jdqIgerVGh2LvkHy4W5Px2Q2QGGq5sI/nfhtlds3FG+/fD/w6o
         lZ+RyyBQduqj4WWk2bjRENiuitjeGW2H4LP4KVm44QLCPehepiqx22xFJwgXykHsF8E/
         LPtezY+MSOyQVpdWJYsfcUgvLUFgVAJQOpWtkxeAWkVw1cFtzCuZO56JLRB29iGtk/J8
         wJx+jZoSyyp2vRrTss7OQKooG0kLsdQyIoGUXyLc+ckHfVYyTw7yBM0K2zHj07JXqx84
         q0xQ==
X-Gm-Message-State: APjAAAX02TtT/coixisoLbvZRWDSiLeaOYZXTXeaBYzBSsLWZbIvTecM
        OQF4JMjxFXMfdz9bX6dSCmA0tngNqn7oD14DX/gQKA==
X-Google-Smtp-Source: APXvYqziD0kd6CAI+ORASt9k0FiABuivXvK5mwcS5fOXOODPGoNKl9X6IPPDGPt30MkpGvgZijRIW6ln4KDOUccuoJ4=
X-Received: by 2002:a02:93e5:: with SMTP id z92mr4401688jah.8.1569337496272;
 Tue, 24 Sep 2019 08:04:56 -0700 (PDT)
MIME-Version: 1.0
References: <20190924150342.16536-1-kristian.evensen@gmail.com>
In-Reply-To: <20190924150342.16536-1-kristian.evensen@gmail.com>
From:   Kristian Evensen <kristian.evensen@gmail.com>
Date:   Tue, 24 Sep 2019 17:04:44 +0200
Message-ID: <CAKfDRXidEsrDD=Az4eZ5JKfHpekr14Jnw2-OK_W1xVX9n65JcA@mail.gmail.com>
Subject: Re: [RFC] ipset: Add wildcard support to net,iface
To:     Netfilter Development Mailing list 
        <netfilter-devel@vger.kernel.org>
Content-Type: multipart/mixed; boundary="000000000000ffd46005934ddbac"
Sender: netfilter-devel-owner@vger.kernel.org
Precedence: bulk
List-ID: <netfilter-devel.vger.kernel.org>
X-Mailing-List: netfilter-devel@vger.kernel.org

--000000000000ffd46005934ddbac
Content-Type: text/plain; charset="UTF-8"

As mentioned in the RFC, here is the user-space part of wildcard-support.

BR,
Kristian

--000000000000ffd46005934ddbac
Content-Type: text/x-patch; charset="US-ASCII"; 
	name="0001-ipset-Add-interface-wildcard-support.patch"
Content-Disposition: attachment; 
	filename="0001-ipset-Add-interface-wildcard-support.patch"
Content-Transfer-Encoding: base64
Content-ID: <f_k0xz07qj0>
X-Attachment-Id: f_k0xz07qj0

RnJvbSAxMjg2NGNhZGVmNTdkNzBiMzNjZmU2YTNlYzZhM2RmMzRkNDllMDFiIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBLcmlzdGlhbiBFdmVuc2VuIDxrcmlzdGlhbi5ldmVuc2VuQGdt
YWlsLmNvbT4KRGF0ZTogVHVlLCAyNCBTZXAgMjAxOSAxNTozOTo1MSArMDIwMApTdWJqZWN0OiBb
UEFUQ0hdIGlwc2V0OiBBZGQgaW50ZXJmYWNlIHdpbGRjYXJkIHN1cHBvcnQKClNpZ25lZC1vZmYt
Ynk6IEtyaXN0aWFuIEV2ZW5zZW4gPGtyaXN0aWFuLmV2ZW5zZW5AZ21haWwuY29tPgotLS0KIGlu
Y2x1ZGUvbGliaXBzZXQvYXJncy5oICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsKIGluY2x1
ZGUvbGliaXBzZXQvZGF0YS5oICAgICAgICAgICAgICAgICAgICAgICB8ICA0ICstCiBpbmNsdWRl
L2xpYmlwc2V0L2xpbnV4X2lwX3NldC5oICAgICAgICAgICAgICAgfCAgMiArCiAuLi4vdWFwaS9s
aW51eC9uZXRmaWx0ZXIvaXBzZXQvaXBfc2V0LmggICAgICAgfCAgMiArCiAuLi4vbmV0ZmlsdGVy
L2lwc2V0L2lwX3NldF9oYXNoX25ldGlmYWNlLmMgICAgfCAyMyArKysrLQogbGliL2FyZ3MuYyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDggKysKIGxpYi9kYXRhLmMgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICA4ICsrCiBsaWIvaXBzZXRfaGFzaF9u
ZXRpZmFjZS5jICAgICAgICAgICAgICAgICAgICAgfCA5NSArKysrKysrKysrKysrKysrKysrCiA4
IGZpbGVzIGNoYW5nZWQsIDEzNyBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2luY2x1ZGUvbGliaXBzZXQvYXJncy5oIGIvaW5jbHVkZS9saWJpcHNldC9hcmdzLmgK
aW5kZXggY2UxNDI1MS4uNjE2Y2NhNSAxMDA2NDQKLS0tIGEvaW5jbHVkZS9saWJpcHNldC9hcmdz
LmgKKysrIGIvaW5jbHVkZS9saWJpcHNldC9hcmdzLmgKQEAgLTQ0LDYgKzQ0LDcgQEAgZW51bSBp
cHNldF9rZXl3b3JkcyB7CiAJSVBTRVRfQVJHX0ZPUkNFQURELAkJCS8qIGZvcmNlYWRkICovCiAJ
SVBTRVRfQVJHX01BUktNQVNLLAkJCS8qIG1hcmttYXNrICovCiAJSVBTRVRfQVJHX05PTUFUQ0gs
CQkJLyogbm9tYXRjaCAqLworCUlQU0VUX0FSR19JRkFDRV9XSUxEQ0FSRCwJCS8qIGludGVyZmFj
ZSB3aWxkY2FyZCBtYXRjaCAqLwogCS8qIEV4dGVuc2lvbnMgKi8KIAlJUFNFVF9BUkdfVElNRU9V
VCwJCQkvKiB0aW1lb3V0ICovCiAJSVBTRVRfQVJHX0NPVU5URVJTLAkJCS8qIGNvdW50ZXJzICov
CmRpZmYgLS1naXQgYS9pbmNsdWRlL2xpYmlwc2V0L2RhdGEuaCBiL2luY2x1ZGUvbGliaXBzZXQv
ZGF0YS5oCmluZGV4IDk3NDk4NDcuLjg1MTc3M2EgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGliaXBz
ZXQvZGF0YS5oCisrKyBiL2luY2x1ZGUvbGliaXBzZXQvZGF0YS5oCkBAIC02Niw2ICs2Niw3IEBA
IGVudW0gaXBzZXRfb3B0IHsKIAlJUFNFVF9PUFRfU0tCTUFSSywKIAlJUFNFVF9PUFRfU0tCUFJJ
TywKIAlJUFNFVF9PUFRfU0tCUVVFVUUsCisJSVBTRVRfT1BUX0lGQUNFX1dJTERDQVJELAogCS8q
IEludGVybmFsIG9wdGlvbnMgKi8KIAlJUFNFVF9PUFRfRkxBR1MgPSA0OCwJLyogSVBTRVRfRkxB
R19FWElTVHwgKi8KIAlJUFNFVF9PUFRfQ0FEVF9GTEFHUywJLyogSVBTRVRfRkxBR19CRUZPUkV8
ICovCkBAIC0xMjgsNyArMTI5LDggQEAgZW51bSBpcHNldF9vcHQgewogCXwgSVBTRVRfRkxBRyhJ
UFNFVF9PUFRfQURUX0NPTU1FTlQpXAogCXwgSVBTRVRfRkxBRyhJUFNFVF9PUFRfU0tCTUFSSykJ
XAogCXwgSVBTRVRfRkxBRyhJUFNFVF9PUFRfU0tCUFJJTykJXAotCXwgSVBTRVRfRkxBRyhJUFNF
VF9PUFRfU0tCUVVFVUUpKQorCXwgSVBTRVRfRkxBRyhJUFNFVF9PUFRfU0tCUVVFVUUpIFwKKwl8
IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lGQUNFX1dJTERDQVJEKSkKIAogc3RydWN0IGlwc2V0X2Rh
dGE7CiAKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGliaXBzZXQvbGludXhfaXBfc2V0LmggYi9pbmNs
dWRlL2xpYmlwc2V0L2xpbnV4X2lwX3NldC5oCmluZGV4IDNjZDE1MWYuLmQyMzM3ZjkgMTAwNjQ0
Ci0tLSBhL2luY2x1ZGUvbGliaXBzZXQvbGludXhfaXBfc2V0LmgKKysrIGIvaW5jbHVkZS9saWJp
cHNldC9saW51eF9pcF9zZXQuaApAQCAtMjA0LDYgKzIwNCw4IEBAIGVudW0gaXBzZXRfY2FkdF9m
bGFncyB7CiAJSVBTRVRfRkxBR19XSVRIX0ZPUkNFQUREID0gKDEgPDwgSVBTRVRfRkxBR19CSVRf
V0lUSF9GT1JDRUFERCksCiAJSVBTRVRfRkxBR19CSVRfV0lUSF9TS0JJTkZPID0gNiwKIAlJUFNF
VF9GTEFHX1dJVEhfU0tCSU5GTyA9ICgxIDw8IElQU0VUX0ZMQUdfQklUX1dJVEhfU0tCSU5GTyks
CisJSVBTRVRfRkxBR19CSVRfSUZBQ0VfV0lMRENBUkQgPSA3LAorCUlQU0VUX0ZMQUdfSUZBQ0Vf
V0lMRENBUkQgPSAoMSA8PCBJUFNFVF9GTEFHX0JJVF9JRkFDRV9XSUxEQ0FSRCksCiAJSVBTRVRf
RkxBR19DQURUX01BWAk9IDE1LAogfTsKIApkaWZmIC0tZ2l0IGEva2VybmVsL2luY2x1ZGUvdWFw
aS9saW51eC9uZXRmaWx0ZXIvaXBzZXQvaXBfc2V0LmggYi9rZXJuZWwvaW5jbHVkZS91YXBpL2xp
bnV4L25ldGZpbHRlci9pcHNldC9pcF9zZXQuaAppbmRleCBhODljNTk2Li5kOGFiNzE4IDEwMDY0
NAotLS0gYS9rZXJuZWwvaW5jbHVkZS91YXBpL2xpbnV4L25ldGZpbHRlci9pcHNldC9pcF9zZXQu
aAorKysgYi9rZXJuZWwvaW5jbHVkZS91YXBpL2xpbnV4L25ldGZpbHRlci9pcHNldC9pcF9zZXQu
aApAQCAtMjA0LDYgKzIwNCw4IEBAIGVudW0gaXBzZXRfY2FkdF9mbGFncyB7CiAJSVBTRVRfRkxB
R19XSVRIX0ZPUkNFQUREID0gKDEgPDwgSVBTRVRfRkxBR19CSVRfV0lUSF9GT1JDRUFERCksCiAJ
SVBTRVRfRkxBR19CSVRfV0lUSF9TS0JJTkZPID0gNiwKIAlJUFNFVF9GTEFHX1dJVEhfU0tCSU5G
TyA9ICgxIDw8IElQU0VUX0ZMQUdfQklUX1dJVEhfU0tCSU5GTyksCisJSVBTRVRfRkxBR19CSVRf
SUZBQ0VfV0lMRENBUkQgPSA3LAorCUlQU0VUX0ZMQUdfSUZBQ0VfV0lMRENBUkQgPSAoMSA8PCBJ
UFNFVF9GTEFHX0JJVF9JRkFDRV9XSUxEQ0FSRCksCiAJSVBTRVRfRkxBR19DQURUX01BWAk9IDE1
LAogfTsKIApkaWZmIC0tZ2l0IGEva2VybmVsL25ldC9uZXRmaWx0ZXIvaXBzZXQvaXBfc2V0X2hh
c2hfbmV0aWZhY2UuYyBiL2tlcm5lbC9uZXQvbmV0ZmlsdGVyL2lwc2V0L2lwX3NldF9oYXNoX25l
dGlmYWNlLmMKaW5kZXggNDkxNmFjYy4uMmU2ZWViNyAxMDA2NDQKLS0tIGEva2VybmVsL25ldC9u
ZXRmaWx0ZXIvaXBzZXQvaXBfc2V0X2hhc2hfbmV0aWZhY2UuYworKysgYi9rZXJuZWwvbmV0L25l
dGZpbHRlci9pcHNldC9pcF9zZXRfaGFzaF9uZXRpZmFjZS5jCkBAIC0yOSw3ICsyOSw4IEBACiAv
KgkJCQkzICAgIENvdW50ZXJzIHN1cHBvcnQgYWRkZWQgKi8KIC8qCQkJCTQgICAgQ29tbWVudHMg
c3VwcG9ydCBhZGRlZCAqLwogLyoJCQkJNSAgICBGb3JjZWFkZCBzdXBwb3J0IGFkZGVkICovCi0j
ZGVmaW5lIElQU0VUX1RZUEVfUkVWX01BWAk2IC8qIHNrYmluZm8gc3VwcG9ydCBhZGRlZCAqLwor
LyoJCQkJNiAgICBza2JpbmZvIHN1cHBvcnQgYWRkZWQgKi8KKyNkZWZpbmUgSVBTRVRfVFlQRV9S
RVZfTUFYCTcgLyogaW50ZXJmYWNlIHdpbGRjYXJkIHN1cHBvcnQgYWRkZWQgKi8KIAogTU9EVUxF
X0xJQ0VOU0UoIkdQTCIpOwogTU9EVUxFX0FVVEhPUigiSm96c2VmIEthZGxlY3NpayA8a2FkbGVj
QG5ldGZpbHRlci5vcmc+Iik7CkBAIC02MSw2ICs2Miw3IEBAIHN0cnVjdCBoYXNoX25ldGlmYWNl
NF9lbGVtIHsKIAl1OCBjaWRyOwogCXU4IG5vbWF0Y2g7CiAJdTggZWxlbTsKKwl1OCB3aWxkY2Fy
ZDsKIAljaGFyIGlmYWNlW0lGTkFNU0laXTsKIH07CiAKQEAgLTc1LDcgKzc3LDkgQEAgaGFzaF9u
ZXRpZmFjZTRfZGF0YV9lcXVhbChjb25zdCBzdHJ1Y3QgaGFzaF9uZXRpZmFjZTRfZWxlbSAqaXAx
LAogCSAgICAgICBpcDEtPmNpZHIgPT0gaXAyLT5jaWRyICYmCiAJICAgICAgICgrKyptdWx0aSkg
JiYKIAkgICAgICAgaXAxLT5waHlzZGV2ID09IGlwMi0+cGh5c2RldiAmJgotCSAgICAgICBzdHJj
bXAoaXAxLT5pZmFjZSwgaXAyLT5pZmFjZSkgPT0gMDsKKwkgICAgICAgKGlwMS0+d2lsZGNhcmQg
PworCQlzdHJuY21wKGlwMS0+aWZhY2UsIGlwMi0+aWZhY2UsIHN0cmxlbihpcDEtPmlmYWNlKSkg
PT0gMCA6CisJCXN0cmNtcChpcDEtPmlmYWNlLCBpcDItPmlmYWNlKSA9PSAwKTsKIH0KIAogc3Rh
dGljIGlubGluZSBpbnQKQEAgLTEwNyw3ICsxMTEsOCBAQCBzdGF0aWMgYm9vbAogaGFzaF9uZXRp
ZmFjZTRfZGF0YV9saXN0KHN0cnVjdCBza19idWZmICpza2IsCiAJCQkgY29uc3Qgc3RydWN0IGhh
c2hfbmV0aWZhY2U0X2VsZW0gKmRhdGEpCiB7Ci0JdTMyIGZsYWdzID0gZGF0YS0+cGh5c2RldiA/
IElQU0VUX0ZMQUdfUEhZU0RFViA6IDA7CisJdTMyIGZsYWdzID0gKGRhdGEtPnBoeXNkZXYgPyBJ
UFNFVF9GTEFHX1BIWVNERVYgOiAwKSB8CisJCSAgICAoZGF0YS0+d2lsZGNhcmQgPyBJUFNFVF9G
TEFHX0lGQUNFX1dJTERDQVJEIDogMCk7CiAKIAlpZiAoZGF0YS0+bm9tYXRjaCkKIAkJZmxhZ3Mg
fD0gSVBTRVRfRkxBR19OT01BVENIOwpAQCAtMjMzLDYgKzIzOCw4IEBAIGhhc2hfbmV0aWZhY2U0
X3VhZHQoc3RydWN0IGlwX3NldCAqc2V0LCBzdHJ1Y3QgbmxhdHRyICp0YltdLAogCQkJZS5waHlz
ZGV2ID0gMTsKIAkJaWYgKGNhZHRfZmxhZ3MgJiBJUFNFVF9GTEFHX05PTUFUQ0gpCiAJCQlmbGFn
cyB8PSAoSVBTRVRfRkxBR19OT01BVENIIDw8IDE2KTsKKwkJaWYgKGNhZHRfZmxhZ3MgJiBJUFNF
VF9GTEFHX0lGQUNFX1dJTERDQVJEKQorCQkJZS53aWxkY2FyZCA9IDE7CiAJfQogCWlmIChhZHQg
PT0gSVBTRVRfVEVTVCB8fCAhdGJbSVBTRVRfQVRUUl9JUF9UT10pIHsKIAkJZS5pcCA9IGh0b25s
KGlwICYgaXBfc2V0X2hvc3RtYXNrKGUuY2lkcikpOwpAQCAtMjg0LDYgKzI5MSw3IEBAIHN0cnVj
dCBoYXNoX25ldGlmYWNlNl9lbGVtIHsKIAl1OCBjaWRyOwogCXU4IG5vbWF0Y2g7CiAJdTggZWxl
bTsKKwl1OCB3aWxkY2FyZDsKIAljaGFyIGlmYWNlW0lGTkFNU0laXTsKIH07CiAKQEAgLTI5OCw3
ICszMDYsOSBAQCBoYXNoX25ldGlmYWNlNl9kYXRhX2VxdWFsKGNvbnN0IHN0cnVjdCBoYXNoX25l
dGlmYWNlNl9lbGVtICppcDEsCiAJICAgICAgIGlwMS0+Y2lkciA9PSBpcDItPmNpZHIgJiYKIAkg
ICAgICAgKCsrKm11bHRpKSAmJgogCSAgICAgICBpcDEtPnBoeXNkZXYgPT0gaXAyLT5waHlzZGV2
ICYmCi0JICAgICAgIHN0cmNtcChpcDEtPmlmYWNlLCBpcDItPmlmYWNlKSA9PSAwOworCSAgICAg
ICAoaXAxLT53aWxkY2FyZCA/CisJCXN0cm5jbXAoaXAxLT5pZmFjZSwgaXAyLT5pZmFjZSwgc3Ry
bGVuKGlwMS0+aWZhY2UpKSA9PSAwIDoKKwkJc3RyY21wKGlwMS0+aWZhY2UsIGlwMi0+aWZhY2Up
ID09IDApOwogfQogCiBzdGF0aWMgaW5saW5lIGludApAQCAtMzMwLDcgKzM0MCw4IEBAIHN0YXRp
YyBib29sCiBoYXNoX25ldGlmYWNlNl9kYXRhX2xpc3Qoc3RydWN0IHNrX2J1ZmYgKnNrYiwKIAkJ
CSBjb25zdCBzdHJ1Y3QgaGFzaF9uZXRpZmFjZTZfZWxlbSAqZGF0YSkKIHsKLQl1MzIgZmxhZ3Mg
PSBkYXRhLT5waHlzZGV2ID8gSVBTRVRfRkxBR19QSFlTREVWIDogMDsKKwl1MzIgZmxhZ3MgPSAo
ZGF0YS0+cGh5c2RldiA/IElQU0VUX0ZMQUdfUEhZU0RFViA6IDApIHwKKwkJICAgIChkYXRhLT53
aWxkY2FyZCA/IElQU0VUX0ZMQUdfSUZBQ0VfV0lMRENBUkQgOiAwKTsKIAogCWlmIChkYXRhLT5u
b21hdGNoKQogCQlmbGFncyB8PSBJUFNFVF9GTEFHX05PTUFUQ0g7CkBAIC00NDQsNiArNDU1LDgg
QEAgaGFzaF9uZXRpZmFjZTZfdWFkdChzdHJ1Y3QgaXBfc2V0ICpzZXQsIHN0cnVjdCBubGF0dHIg
KnRiW10sCiAJCQllLnBoeXNkZXYgPSAxOwogCQlpZiAoY2FkdF9mbGFncyAmIElQU0VUX0ZMQUdf
Tk9NQVRDSCkKIAkJCWZsYWdzIHw9IChJUFNFVF9GTEFHX05PTUFUQ0ggPDwgMTYpOworCQlpZiAo
Y2FkdF9mbGFncyAmIElQU0VUX0ZMQUdfSUZBQ0VfV0lMRENBUkQpCisJCQllLndpbGRjYXJkID0g
MTsKIAl9CiAKIAlyZXQgPSBhZHRmbihzZXQsICZlLCAmZXh0LCAmZXh0LCBmbGFncyk7CmRpZmYg
LS1naXQgYS9saWIvYXJncy5jIGIvbGliL2FyZ3MuYwppbmRleCAyMDRjNTQ0Li5jMjViYjgwIDEw
MDY0NAotLS0gYS9saWIvYXJncy5jCisrKyBiL2xpYi9hcmdzLmMKQEAgLTE5NSw2ICsxOTUsMTQg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCBpcHNldF9hcmcgaXBzZXRfYXJnc1tdID0gewogCQkucHJp
bnQgPSBpcHNldF9wcmludF9mbGFnLAogCQkuaGVscCA9ICJbbm9tYXRjaF0iLAogCX0sCisJW0lQ
U0VUX0FSR19JRkFDRV9XSUxEQ0FSRF0gPSB7CisJCS5uYW1lID0geyAid2lsZGNhcmQiLCBOVUxM
IH0sCisJCS5oYXNfYXJnID0gSVBTRVRfTk9fQVJHLAorCQkub3B0ID0gSVBTRVRfT1BUX0lGQUNF
X1dJTERDQVJELAorCQkucGFyc2UgPSBpcHNldF9wYXJzZV9mbGFnLAorCQkucHJpbnQgPSBpcHNl
dF9wcmludF9mbGFnLAorCQkuaGVscCA9ICJbd2lsZGNhcmRdIiwKKwl9LAogCS8qIEV4dGVuc2lv
bnMgKi8KIAlbSVBTRVRfQVJHX1RJTUVPVVRdID0gewogCQkubmFtZSA9IHsgInRpbWVvdXQiLCBO
VUxMIH0sCmRpZmYgLS1naXQgYS9saWIvZGF0YS5jIGIvbGliL2RhdGEuYwppbmRleCA0N2M5ZGRi
Li5mMjhkMWQzIDEwMDY0NAotLS0gYS9saWIvZGF0YS5jCisrKyBiL2xpYi9kYXRhLmMKQEAgLTQx
MCw2ICs0MTAsOSBAQCBpcHNldF9kYXRhX3NldChzdHJ1Y3QgaXBzZXRfZGF0YSAqZGF0YSwgZW51
bSBpcHNldF9vcHQgb3B0LCBjb25zdCB2b2lkICp2YWx1ZSkKIAljYXNlIElQU0VUX09QVF9OT01B
VENIOgogCQljYWR0X2ZsYWdfdHlwZV9hdHRyKGRhdGEsIG9wdCwgSVBTRVRfRkxBR19OT01BVENI
KTsKIAkJYnJlYWs7CisJY2FzZSBJUFNFVF9PUFRfSUZBQ0VfV0lMRENBUkQ6CisJCWNhZHRfZmxh
Z190eXBlX2F0dHIoZGF0YSwgb3B0LCBJUFNFVF9GTEFHX0lGQUNFX1dJTERDQVJEKTsKKwkJYnJl
YWs7CiAJY2FzZSBJUFNFVF9PUFRfRkxBR1M6CiAJCWRhdGEtPmZsYWdzID0gKihjb25zdCB1aW50
MzJfdCAqKXZhbHVlOwogCQlicmVhazsKQEAgLTQzMyw2ICs0MzYsOSBAQCBpcHNldF9kYXRhX3Nl
dChzdHJ1Y3QgaXBzZXRfZGF0YSAqZGF0YSwgZW51bSBpcHNldF9vcHQgb3B0LCBjb25zdCB2b2lk
ICp2YWx1ZSkKIAkJaWYgKGRhdGEtPmNhZHRfZmxhZ3MgJiBJUFNFVF9GTEFHX1dJVEhfU0tCSU5G
TykKIAkJCWlwc2V0X2RhdGFfZmxhZ3Nfc2V0KGRhdGEsCiAJCQkJCSAgICAgSVBTRVRfRkxBRyhJ
UFNFVF9PUFRfU0tCSU5GTykpOworCQlpZiAoZGF0YS0+Y2FkdF9mbGFncyAmIElQU0VUX0ZMQUdf
SUZBQ0VfV0lMRENBUkQpCisJCQlpcHNldF9kYXRhX2ZsYWdzX3NldChkYXRhLAorCQkJCQkgICAg
IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lGQUNFX1dJTERDQVJEKSk7CiAJCWJyZWFrOwogCWRlZmF1
bHQ6CiAJCXJldHVybiAtMTsKQEAgLTU2NCw2ICs1NzAsNyBAQCBpcHNldF9kYXRhX2dldChjb25z
dCBzdHJ1Y3QgaXBzZXRfZGF0YSAqZGF0YSwgZW51bSBpcHNldF9vcHQgb3B0KQogCWNhc2UgSVBT
RVRfT1BUX0NSRUFURV9DT01NRU5UOgogCWNhc2UgSVBTRVRfT1BUX0ZPUkNFQUREOgogCWNhc2Ug
SVBTRVRfT1BUX1NLQklORk86CisJY2FzZSBJUFNFVF9PUFRfSUZBQ0VfV0lMRENBUkQ6CiAJCXJl
dHVybiAmZGF0YS0+Y2FkdF9mbGFnczsKIAlkZWZhdWx0OgogCQlyZXR1cm4gTlVMTDsKQEAgLTYz
MCw2ICs2MzcsNyBAQCBpcHNldF9kYXRhX3NpemVvZihlbnVtIGlwc2V0X29wdCBvcHQsIHVpbnQ4
X3QgZmFtaWx5KQogCWNhc2UgSVBTRVRfT1BUX05PTUFUQ0g6CiAJY2FzZSBJUFNFVF9PUFRfQ09V
TlRFUlM6CiAJY2FzZSBJUFNFVF9PUFRfRk9SQ0VBREQ6CisJY2FzZSBJUFNFVF9PUFRfSUZBQ0Vf
V0lMRENBUkQ6CiAJCXJldHVybiBzaXplb2YodWludDMyX3QpOwogCWNhc2UgSVBTRVRfT1BUX0FE
VF9DT01NRU5UOgogCQlyZXR1cm4gSVBTRVRfTUFYX0NPTU1FTlRfU0laRSArIDE7CmRpZmYgLS1n
aXQgYS9saWIvaXBzZXRfaGFzaF9uZXRpZmFjZS5jIGIvbGliL2lwc2V0X2hhc2hfbmV0aWZhY2Uu
YwppbmRleCBhNzA5ODE2Li42NzU1NzgyIDEwMDY0NAotLS0gYS9saWIvaXBzZXRfaGFzaF9uZXRp
ZmFjZS5jCisrKyBiL2xpYi9pcHNldF9oYXNoX25ldGlmYWNlLmMKQEAgLTYxOSw2ICs2MTksMTAw
IEBAIHN0YXRpYyBzdHJ1Y3QgaXBzZXRfdHlwZSBpcHNldF9oYXNoX25ldGlmYWNlNiA9IHsKIAkJ
ICIgICAgICBBZGRpbmcvZGVsZXRpbmcgbXVsdGlwbGUgZWxlbWVudHMgd2l0aCBJUHY0IGlzIHN1
cHBvcnRlZC4iLAogCS5kZXNjcmlwdGlvbiA9ICJza2JpbmZvIHN1cHBvcnQiLAogfTsKKy8qIGlu
dGVyZmFjZSB3aWxkY2FyZCBzdXBwb3J0ICovCitzdGF0aWMgc3RydWN0IGlwc2V0X3R5cGUgaXBz
ZXRfaGFzaF9uZXRpZmFjZTcgPSB7CisJLm5hbWUgPSAiaGFzaDpuZXQsaWZhY2UiLAorCS5hbGlh
cyA9IHsgIm5ldGlmYWNlaGFzaCIsIE5VTEwgfSwKKwkucmV2aXNpb24gPSA3LAorCS5mYW1pbHkg
PSBORlBST1RPX0lQU0VUX0lQVjQ2LAorCS5kaW1lbnNpb24gPSBJUFNFVF9ESU1fVFdPLAorCS5l
bGVtID0geworCQlbSVBTRVRfRElNX09ORSAtIDFdID0geworCQkJLnBhcnNlID0gaXBzZXRfcGFy
c2VfaXA0X25ldDYsCisJCQkucHJpbnQgPSBpcHNldF9wcmludF9pcCwKKwkJCS5vcHQgPSBJUFNF
VF9PUFRfSVAKKwkJfSwKKwkJW0lQU0VUX0RJTV9UV08gLSAxXSA9IHsKKwkJCS5wYXJzZSA9IGlw
c2V0X3BhcnNlX2lmYWNlLAorCQkJLnByaW50ID0gaXBzZXRfcHJpbnRfaWZhY2UsCisJCQkub3B0
ID0gSVBTRVRfT1BUX0lGQUNFCisJCX0sCisJfSwKKwkuY21kID0geworCQlbSVBTRVRfQ1JFQVRF
XSA9IHsKKwkJCS5hcmdzID0geworCQkJCUlQU0VUX0FSR19GQU1JTFksCisJCQkJLyogQWxpYXNl
cyAqLworCQkJCUlQU0VUX0FSR19JTkVULAorCQkJCUlQU0VUX0FSR19JTkVUNiwKKwkJCQlJUFNF
VF9BUkdfSEFTSFNJWkUsCisJCQkJSVBTRVRfQVJHX01BWEVMRU0sCisJCQkJSVBTRVRfQVJHX1RJ
TUVPVVQsCisJCQkJSVBTRVRfQVJHX0NPVU5URVJTLAorCQkJCUlQU0VUX0FSR19DT01NRU5ULAor
CQkJCUlQU0VUX0FSR19GT1JDRUFERCwKKwkJCQlJUFNFVF9BUkdfU0tCSU5GTywKKwkJCQlJUFNF
VF9BUkdfTk9ORSwKKwkJCX0sCisJCQkubmVlZCA9IDAsCisJCQkuZnVsbCA9IDAsCisJCQkuaGVs
cCA9ICIiLAorCQl9LAorCQlbSVBTRVRfQUREXSA9IHsKKwkJCS5hcmdzID0geworCQkJCUlQU0VU
X0FSR19USU1FT1VULAorCQkJCUlQU0VUX0FSR19OT01BVENILAorCQkJCUlQU0VUX0FSR19JRkFD
RV9XSUxEQ0FSRCwKKwkJCQlJUFNFVF9BUkdfUEFDS0VUUywKKwkJCQlJUFNFVF9BUkdfQllURVMs
CisJCQkJSVBTRVRfQVJHX0FEVF9DT01NRU5ULAorCQkJCUlQU0VUX0FSR19TS0JNQVJLLAorCQkJ
CUlQU0VUX0FSR19TS0JQUklPLAorCQkJCUlQU0VUX0FSR19TS0JRVUVVRSwKKwkJCQlJUFNFVF9B
UkdfTk9ORSwKKwkJCX0sCisJCQkubmVlZCA9IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lQKQorCQkJ
CXwgSVBTRVRfRkxBRyhJUFNFVF9PUFRfSUZBQ0UpLAorCQkJLmZ1bGwgPSBJUFNFVF9GTEFHKElQ
U0VUX09QVF9JUCkKKwkJCQl8IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0NJRFIpCisJCQkJfCBJUFNF
VF9GTEFHKElQU0VUX09QVF9JUF9UTykKKwkJCQl8IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lGQUNF
KQorCQkJCXwgSVBTRVRfRkxBRyhJUFNFVF9PUFRfUEhZU0RFViksCisJCQkuaGVscCA9ICJJUFsv
Q0lEUl18RlJPTS1UTyxbcGh5c2RldjpdSUZBQ0UiLAorCQl9LAorCQlbSVBTRVRfREVMXSA9IHsK
KwkJCS5hcmdzID0geworCQkJCUlQU0VUX0FSR19OT05FLAorCQkJfSwKKwkJCS5uZWVkID0gSVBT
RVRfRkxBRyhJUFNFVF9PUFRfSVApCisJCQkJfCBJUFNFVF9GTEFHKElQU0VUX09QVF9JRkFDRSks
CisJCQkuZnVsbCA9IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lQKQorCQkJCXwgSVBTRVRfRkxBRyhJ
UFNFVF9PUFRfQ0lEUikKKwkJCQl8IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lQX1RPKQorCQkJCXwg
SVBTRVRfRkxBRyhJUFNFVF9PUFRfSUZBQ0UpCisJCQkJfCBJUFNFVF9GTEFHKElQU0VUX09QVF9Q
SFlTREVWKSwKKwkJCS5oZWxwID0gIklQWy9DSURSXXxGUk9NLVRPLFtwaHlzZGV2Ol1JRkFDRSIs
CisJCX0sCisJCVtJUFNFVF9URVNUXSA9IHsKKwkJCS5hcmdzID0geworCQkJCUlQU0VUX0FSR19O
T01BVENILAorCQkJCUlQU0VUX0FSR19OT05FLAorCQkJfSwKKwkJCS5uZWVkID0gSVBTRVRfRkxB
RyhJUFNFVF9PUFRfSVApCisJCQkJfCBJUFNFVF9GTEFHKElQU0VUX09QVF9JRkFDRSksCisJCQku
ZnVsbCA9IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lQKQorCQkJCXwgSVBTRVRfRkxBRyhJUFNFVF9P
UFRfQ0lEUikKKwkJCQl8IElQU0VUX0ZMQUcoSVBTRVRfT1BUX0lGQUNFKQorCQkJCXwgSVBTRVRf
RkxBRyhJUFNFVF9PUFRfUEhZU0RFViksCisJCQkuaGVscCA9ICJJUFsvQ0lEUl0sW3BoeXNkZXY6
XUlGQUNFIiwKKwkJfSwKKwl9LAorCS51c2FnZSA9ICJ3aGVyZSBkZXBlbmRpbmcgb24gdGhlIElO
RVQgZmFtaWx5XG4iCisJCSAiICAgICAgSVAgaXMgYSB2YWxpZCBJUHY0IG9yIElQdjYgYWRkcmVz
cyAob3IgaG9zdG5hbWUpLFxuIgorCQkgIiAgICAgIENJRFIgaXMgYSB2YWxpZCBJUHY0IG9yIElQ
djYgQ0lEUiBwcmVmaXguXG4iCisJCSAiICAgICAgQWRkaW5nL2RlbGV0aW5nIG11bHRpcGxlIGVs
ZW1lbnRzIHdpdGggSVB2NCBpcyBzdXBwb3J0ZWQuIiwKKwkuZGVzY3JpcHRpb24gPSAic2tiaW5m
byBhbmQgd2lsZGNhcmQgc3VwcG9ydCIsCit9OwogCiB2b2lkIF9pbml0KHZvaWQpOwogdm9pZCBf
aW5pdCh2b2lkKQpAQCAtNjMwLDQgKzcyNCw1IEBAIHZvaWQgX2luaXQodm9pZCkKIAlpcHNldF90
eXBlX2FkZCgmaXBzZXRfaGFzaF9uZXRpZmFjZTQpOwogCWlwc2V0X3R5cGVfYWRkKCZpcHNldF9o
YXNoX25ldGlmYWNlNSk7CiAJaXBzZXRfdHlwZV9hZGQoJmlwc2V0X2hhc2hfbmV0aWZhY2U2KTsK
KwlpcHNldF90eXBlX2FkZCgmaXBzZXRfaGFzaF9uZXRpZmFjZTcpOwogfQotLSAKMi4yMC4xCgo=
--000000000000ffd46005934ddbac--
